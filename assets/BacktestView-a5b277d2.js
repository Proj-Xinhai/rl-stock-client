import{d as T,r as n,o as i,c as d,b as t,l as p,p as m,C as h,i as b,g as a,q as g,B as U,F as k,h as V,j as B,t as e,y as M,x as f,s as $}from"./index-3400651a.js";const F={class:"ts-grid is-evenly-divided"},S={class:"column ts-wrap is-vertical"},D={class:"ts-text is-label"},j={class:"ts-input is-end-labeled"},q=t("span",{class:"label"},".TW",-1),E={class:"column ts-wrap is-vertical"},I={class:"ts-text is-label"},L={class:"ts-select"},W=["value"],z={class:"column ts-wrap is-vertical"},A={class:"ts-text is-label"},G={class:"ts-input is-start-labeled"},H=t("span",{class:"label"},"$",-1),J={class:"ts-grid is-evenly-divided"},K={class:"column ts-wrap is-vertical"},O={class:"ts-input"},P=["max"],Q={class:"ts-text is-label"},R={class:"column ts-wrap is-vertical"},X={class:"ts-input"},Y=["min"],Z={class:"ts-text is-label"},tt={class:"ts-grid is-top-aligned"},lt={class:"column ts-wrap"},st={class:"ts-box u-top-spaced"},et={class:"ts-table"},at=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"action"),t("th",null,"trade"),t("th",null,"balance"),t("th",null,"hold"),t("th",null,"net"),t("th",null,"reward")])],-1),nt={key:0},ot=["data-tooltip"],ut={class:"ts-text is-negative"},it=["data-tooltip"],dt={colspan:"7"},_t=T({__name:"BacktestView",setup(vt){const _=n(""),v=n(""),c=n(""),r=n(""),o=n(null),u=n(!1),x=n(NaN),y=n([]),C=()=>{_.value==""||v.value==""||c.value==""||r.value==""||!o.value||(console.log(_.value),console.log(v.value),console.log(c.value),console.log(r.value),console.log(o.value),M.emit("backtesting",{stock:_.value,model:r.value,default_balance:o.value,start:v.value,end:c.value},(w,s,l)=>{if(!w){alert(`${s}: ${l}`);return}x.value=l.value,y.value=l.actions}))};return(w,s)=>(i(),d(k,null,[t("div",{class:"ts-wrap is-vertical",onMouseenter:s[7]||(s[7]=l=>u.value=!0),onMouseleave:s[8]||(s[8]=l=>u.value=!1)},[t("div",F,[t("div",S,[t("div",D,[p(h,null,{default:m(()=>[a(t("span",null,"stock",512),[[f,u.value]])]),_:1}),b(" ​ ")]),t("div",j,[a(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>_.value=l)},null,512),[[g,_.value]]),q])]),t("div",E,[t("div",I,[p(h,null,{default:m(()=>[a(t("span",null,"model",512),[[f,u.value]])]),_:1}),b(" ​ ")]),t("div",L,[a(t("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>r.value=l)},[(i(!0),d(k,null,V(B($).works.filter(l=>l.status==2&&B($).tasks.find(N=>N.name==l.task_name)),l=>(i(),d("option",{key:l.id,value:l.id},e(l.task_name)+"("+e(l.id.slice(0,7))+")",9,W))),128))],512),[[U,r.value]])])]),t("div",z,[t("div",A,[p(h,null,{default:m(()=>[a(t("span",null,"default balance",512),[[f,u.value]])]),_:1}),b(" ​")]),t("div",G,[H,a(t("input",{type:"number",min:"0","onUpdate:modelValue":s[2]||(s[2]=l=>o.value=l),onFocusout:s[3]||(s[3]=l=>o.value<=0?o.value=null:null)},null,544),[[g,o.value]])])])]),t("div",J,[t("div",K,[t("div",O,[a(t("input",{type:"date",max:c.value,"onUpdate:modelValue":s[4]||(s[4]=l=>v.value=l)},null,8,P),[[g,v.value]])]),t("div",Q,[p(h,null,{default:m(()=>[a(t("span",null,"start",512),[[f,u.value]])]),_:1}),b(" ​ ")])]),t("div",R,[t("div",X,[a(t("input",{type:"date",min:v.value,"onUpdate:modelValue":s[5]||(s[5]=l=>c.value=l)},null,8,Y),[[g,c.value]])]),t("div",Z,[p(h,null,{default:m(()=>[a(t("span",null,"end",512),[[f,u.value]])]),_:1}),b(" ​ ")])]),t("div",tt,[t("div",lt,[t("button",{class:"ts-button is-outlined",onClick:s[6]||(s[6]=()=>{})},"preload"),t("button",{class:"ts-button",onClick:C},"backtest")])])])],32),t("div",st,[t("table",et,[at,t("tbody",null,[(i(!0),d(k,null,V(y.value,l=>(i(),d("tr",{key:l.date},[t("td",null,e(l.date),1),t("td",null,[l.trade==0?(i(),d("span",nt,[t("span",{"data-tooltip":l.original_action},"hold ",8,ot),t("del",ut,"("+e(l.action)+")",1)])):(i(),d("span",{key:1,"data-tooltip":l.original_action},e(l.action),9,it))]),t("td",null,e(l.trade),1),t("td",null,e(l.balance),1),t("td",null,e(l.hold),1),t("td",null,e(l.net),1),t("td",null,e(l.reward),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("th",dt,"roi: "+e(x.value),1)])])])])],64))}});export{_t as default};
