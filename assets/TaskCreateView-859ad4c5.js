import{d as E,o as l,c as n,x as S,u as W,r as v,a as q,y as F,w as M,e as s,f as D,g as I,l as p,z,t as y,v as k,A,F as f,i as x,s as m,m as J}from"./index-b20cd16f.js";const G=E({__name:"TheTaskImporter",props:{parentWrapper:{}},setup(V){const w=V,b=()=>{const i=w.parentWrapper;Object.assign(document.createElement("input"),{type:"file",accept:".json",onchange:g=>{const _=g.target;if(_.files){const h=_.files[0],c=new FileReader;c.readAsText(h),c.onload=()=>{const o=JSON.parse(c.result);i.name.value=o.name,i.algorithm.value=o.algorithm,i.algorithm_args.value=[],i.learn_args.value=[];for(const d in o.algorithm_args)i.algorithm_args.value.push({key:d,value:o.algorithm_args[d]});for(const d in o.learn_args)i.learn_args.value.push({key:d,value:o.learn_args[d]});i.helper.value=o.helper}}}}).click()};return(i,g)=>(l(),n("button",{class:"ts-button is-outlined has-start-spaced",onClick:b},"Import"))}}),H={class:"ts-header is-huge u-bottom-spaced-big"},K={class:"ts-notice is-negative u-bottom-spaced"},P=s("div",{class:"title"},"Error",-1),Q={class:"content"},X={class:"ts-wrap is-vertical"},Y={class:"ts-control"},Z=s("div",{class:"label is-start-aligned"},"name",-1),ss={class:"content"},es={class:"ts-input"},ts={class:"ts-control"},os=s("div",{class:"label is-start-aligned"},"algorithm",-1),as={class:"content"},ls={class:"ts-select is-fluid"},ns=["value"],is=s("option",{selected:"",disabled:"",hidden:""},"Choose algorithm",-1),cs={class:"ts-control u-top-spaced-big"},ds=s("div",{class:"label is-start-aligned"},"algorithm_args",-1),rs={class:"content"},us=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),_s=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),vs={class:"column is-5-wide"},ps={class:"ts-input"},hs=["onUpdate:modelValue"],ms={class:"column is-10-wide"},gs={class:"ts-input"},ys=["onUpdate:modelValue"],ks={class:"column is-1-wide"},fs=["onClick"],ws={class:"ts-control u-top-spaced-big u-bottom-spaced-big"},bs=s("div",{class:"label is-start-aligned"},"learn_args",-1),xs={class:"content"},Cs=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),Vs=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),Ts={class:"column is-5-wide"},Us={class:"ts-input"},As=["onUpdate:modelValue"],Es={class:"column is-10-wide"},Os={class:"ts-input"},$s=["onUpdate:modelValue"],js={class:"column is-1-wide"},Bs=["onClick"],Ls={class:"ts-control"},Ns=s("div",{class:"label is-start-aligned"},"helper",-1),Rs={class:"content"},Ss={class:"ts-select is-fluid"},Ws=["value"],qs=s("option",{selected:"",disabled:"",hidden:""},"Choose helper",-1),Fs=s("div",{class:"label is-start-aligned"},null,-1),Ds=E({__name:"TaskCreateView",setup(V){const w=S(),b=W(),i=v([]),g=v([]),_=v(""),h=v(""),c=v([]),o=v([]),d=v("");let T=!0;const O={name:_,algorithm:h,algorithm_args:c,learn_args:o,helper:d},C=v(""),U=()=>{i.value=m.algorithms,g.value=m.helpers},$=()=>{c.value.push({key:"",value:""})},j=a=>{c.value.splice(a,1)},B=()=>{o.value.push({key:"",value:""})},L=a=>{o.value.splice(a,1)},N=()=>{m.loading=!0;const a={},t={};c.value.forEach(e=>{a[e.key]=e.value}),o.value.forEach(e=>{t[e.key]=e.value}),J.emit("create_task",{name:_.value,algorithm:h.value,algorithm_args:a,learn_args:t,helper:d.value},(e,r,u)=>{m.loading=!1,e?(T=!1,b.push({name:"tasks"})):C.value=`${r}: ${u}`})},R=()=>{const a=m.tasks.find(t=>t.name==w.query.copy);if(a){_.value=a.name,h.value=a.args.algorithm,c.value=[];for(const[t,e]of Object.entries(a.args.algorithm_args))c.value.push({key:t,value:e});o.value=[];for(const[t,e]of Object.entries(a.args.learn_args))o.value.push({key:t,value:e});d.value=a.args.helper,b.replace({query:{}})}};return q(()=>{U(),w.query.copy&&R(),window.onbeforeunload=()=>"Are you sure you want to leave?"}),F((a,t,e)=>{window.onbeforeunload=null,!T||window.confirm("Are you sure you want to leave?")?e():e(!1)}),M(m,()=>{U()}),(a,t)=>(l(),n(f,null,[s("div",H,[D("Create Task "),I(G,{parentWrapper:O})]),p(s("div",K,[P,s("div",Q,y(C.value),1)],512),[[z,C.value!=""]]),s("div",X,[s("div",Y,[Z,s("div",ss,[s("div",es,[p(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e)},null,512),[[k,_.value]])])])]),s("div",ts,[os,s("div",as,[s("div",ls,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e)},[(l(!0),n(f,null,x(i.value,e=>(l(),n("option",{value:e.name,key:e.name},y(e.name)+": "+y(e.description),9,ns))),128)),is],512),[[A,h.value]])])])]),s("div",cs,[ds,s("div",rs,[s("div",{class:"ts-grid is-middle-aligned"},[us,_s,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:$})])]),(l(!0),n(f,null,x(c.value,(e,r)=>(l(),n("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:r},[s("div",vs,[s("div",ps,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.key=u,key:r},null,8,hs)),[[k,e.key]])])]),s("div",ms,[s("div",gs,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.value=u,key:r},null,8,ys)),[[k,e.value]])])]),s("div",ks,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:u=>j(r)},null,8,fs)])]))),128))])]),s("div",ws,[bs,s("div",xs,[s("div",{class:"ts-grid is-middle-aligned"},[Cs,Vs,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:B})])]),(l(!0),n(f,null,x(o.value,(e,r)=>(l(),n("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:r},[s("div",Ts,[s("div",Us,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.key=u,key:r},null,8,As)),[[k,e.key]])])]),s("div",Es,[s("div",Os,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.value=u,key:r},null,8,$s)),[[k,e.value]])])]),s("div",js,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:u=>L(r)},null,8,Bs)])]))),128))])]),s("div",Ls,[Ns,s("div",Rs,[s("div",Ss,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},[(l(!0),n(f,null,x(g.value,e=>(l(),n("option",{value:e.name,key:e.name},y(e.name)+": "+y(e.description),9,Ws))),128)),qs],512),[[A,d.value]])])])]),s("div",{class:"ts-control"},[Fs,s("div",{class:"content"},[s("div",{class:"ts-content is-end-aligned"},[s("button",{class:"ts-button",onClick:N},"Create")])])])])],64))}});export{Ds as default};
