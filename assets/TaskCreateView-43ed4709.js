import{d as j,o,c as l,q as F,u as M,r as m,a as D,x as I,w as z,e as s,g as J,j as G,l as p,y as $,t as g,v as w,z as O,F as k,f as b,s as y,m as H}from"./index-b89dc9f7.js";const K=j({__name:"TheTaskImporter",props:{parentWrapper:{}},setup(T){const x=T,C=()=>{const c=x.parentWrapper;Object.assign(document.createElement("input"),{type:"file",accept:".rlstask",onchange:f=>{const h=f.target;if(h.files){const v=h.files[0],r=new FileReader;r.readAsText(v),r.onload=()=>{const n=JSON.parse(r.result);c.name.value=n.name,c.algorithm.value=n.algorithm,c.algorithm_args.value=[],c.learn_args.value=[];for(const u in n.algorithm_args)c.algorithm_args.value.push({key:u,value:n.algorithm_args[u]});for(const u in n.learn_args)c.learn_args.value.push({key:u,value:n.learn_args[u]});c.helper.value=n.helper}}}}).click()};return(c,f)=>(o(),l("button",{class:"ts-button is-outlined has-start-spaced",onClick:C},"Import"))}}),P={class:"ts-header is-huge u-bottom-spaced-big"},Q={class:"ts-notice is-negative u-bottom-spaced"},X=s("div",{class:"title"},"Error",-1),Y={class:"content"},Z={class:"ts-wrap is-vertical"},ss={class:"ts-control"},es=s("div",{class:"label is-start-aligned"},"name",-1),ts={class:"content"},as={class:"ts-input"},os={class:"ts-control"},ls=s("div",{class:"label is-start-aligned"},"algorithm",-1),ns={class:"content"},is={class:"ts-select is-fluid"},cs=["value"],ds=s("option",{selected:"",disabled:"",hidden:""},"Choose algorithm",-1),rs={class:"ts-control u-top-spaced-big"},us=s("div",{class:"label is-start-aligned"},"algorithm_args",-1),vs={class:"content"},_s=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),ps=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),hs={class:"column is-5-wide"},ms={class:"ts-input"},gs=["onUpdate:modelValue","data-dropdown"],ks=["data-name"],ys=["onClick"],fs={class:"column is-10-wide"},ws={class:"ts-input"},bs=["onUpdate:modelValue"],xs={class:"column is-1-wide"},Cs=["onClick"],Vs={class:"ts-control u-top-spaced-big u-bottom-spaced-big"},Ts=s("div",{class:"label is-start-aligned"},"learn_args",-1),Us={class:"content"},As=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),Es=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),$s={class:"column is-5-wide"},Os={class:"ts-input"},js=["onUpdate:modelValue"],qs={class:"column is-10-wide"},Bs={class:"ts-input"},Ls=["onUpdate:modelValue"],Ns={class:"column is-1-wide"},Rs=["onClick"],Ss={class:"ts-control"},Ws=s("div",{class:"label is-start-aligned"},"helper",-1),Fs={class:"content"},Ms={class:"ts-select is-fluid"},Ds=["value"],Is=s("option",{selected:"",disabled:"",hidden:""},"Choose helper",-1),zs=s("div",{class:"label is-start-aligned"},null,-1),Hs=j({__name:"TaskCreateView",setup(T){const x=F(),C=M(),c=m([]),f=m([]),h=m(""),v=m(""),r=m([]),n=m([]),u=m("");let U=!0;const q={name:h,algorithm:v,algorithm_args:r,learn_args:n,helper:u},V=m(""),A=()=>{c.value=y.algorithms,f.value=y.helpers},B=()=>{r.value.push({key:"",value:""})},L=i=>{r.value.splice(i,1)},N=()=>{n.value.push({key:"",value:""})},R=i=>{n.value.splice(i,1)},S=()=>{y.loading=!0;const i={},a={};r.value.forEach(e=>{i[e.key]=e.value}),n.value.forEach(e=>{a[e.key]=e.value}),H.emit("create_task",{name:h.value,algorithm:v.value,algorithm_args:i,learn_args:a,helper:u.value},(e,d,_)=>{y.loading=!1,e?(U=!1,C.push({name:"tasks"})):V.value=`${d}: ${_}`})},W=()=>{const i=y.tasks.find(a=>a.name==x.query.copy);if(i){h.value=i.name,v.value=i.args.algorithm,r.value=[];for(const[a,e]of Object.entries(i.args.algorithm_args))r.value.push({key:a,value:e});n.value=[];for(const[a,e]of Object.entries(i.args.learn_args))n.value.push({key:a,value:e});u.value=i.args.helper,C.replace({query:{}})}};return D(()=>{A(),x.query.copy&&W(),window.onbeforeunload=()=>"Are you sure you want to leave?"}),I((i,a,e)=>{window.onbeforeunload=null,!U||window.confirm("Are you sure you want to leave?")?e():e(!1)}),z(y,()=>{A()}),(i,a)=>(o(),l(k,null,[s("div",P,[J("Create Task "),G(K,{parentWrapper:q})]),p(s("div",Q,[X,s("div",Y,g(V.value),1)],512),[[$,V.value!=""]]),s("div",Z,[s("div",ss,[es,s("div",ts,[s("div",as,[p(s("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e)},null,512),[[w,h.value]])])])]),s("div",os,[ls,s("div",ns,[s("div",is,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e)},[(o(!0),l(k,null,b(c.value,e=>(o(),l("option",{value:e.name,key:e.name},g(e.name)+": "+g(e.description),9,cs))),128)),ds],512),[[O,v.value]])])])]),s("div",rs,[us,s("div",vs,[s("div",{class:"ts-grid is-middle-aligned"},[_s,ps,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:B})])]),(o(!0),l(k,null,b(r.value,(e,d)=>{var _,E;return o(),l("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:d},[s("div",hs,[s("div",ms,[p((o(),l("input",{type:"text","onUpdate:modelValue":t=>e.key=t,key:d,"data-dropdown":d},null,8,gs)),[[w,e.key]])]),p(s("div",{class:"ts-dropdown","data-name":d},[(o(!0),l(k,null,b((_=c.value.find(t=>t.name==v.value))==null?void 0:_.args.filter(t=>t.includes(e.key)),t=>(o(),l("button",{class:"item",key:t,onClick:Js=>e.key=t},g(t),9,ys))),128))],8,ks),[[$,c.value.find(t=>t.name==v.value)&&((E=c.value.find(t=>t.name==v.value))==null?void 0:E.args.filter(t=>t.includes(e.key)).length)!==0]])]),s("div",fs,[s("div",ws,[p((o(),l("input",{type:"text","onUpdate:modelValue":t=>e.value=t,key:d},null,8,bs)),[[w,e.value]])])]),s("div",xs,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:t=>L(d)},null,8,Cs)])])}),128))])]),s("div",Vs,[Ts,s("div",Us,[s("div",{class:"ts-grid is-middle-aligned"},[As,Es,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:N})])]),(o(!0),l(k,null,b(n.value,(e,d)=>(o(),l("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:d},[s("div",$s,[s("div",Os,[p((o(),l("input",{type:"text","onUpdate:modelValue":_=>e.key=_,key:d},null,8,js)),[[w,e.key]])])]),s("div",qs,[s("div",Bs,[p((o(),l("input",{type:"text","onUpdate:modelValue":_=>e.value=_,key:d},null,8,Ls)),[[w,e.value]])])]),s("div",Ns,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:_=>R(d)},null,8,Rs)])]))),128))])]),s("div",Ss,[Ws,s("div",Fs,[s("div",Ms,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e)},[(o(!0),l(k,null,b(f.value,e=>(o(),l("option",{value:e.name,key:e.name},g(e.name)+": "+g(e.description),9,Ds))),128)),Is],512),[[O,u.value]])])])]),s("div",{class:"ts-control"},[zs,s("div",{class:"content"},[s("div",{class:"ts-content is-end-aligned"},[s("button",{class:"ts-button",onClick:S},"Create")])])])])],64))}});export{Hs as default};
