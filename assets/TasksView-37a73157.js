import{d as p,r as h,o as c,c as d,a as s,t as l,n as g,w as b,v as f,b as $,e as C,F as m,s as v,f as w,u as N,g as y,h as T,i as V,j as r,k as u,l as k,m as x,p as B,q as D}from"./index-455fc031.js";import{_ as R,a as A}from"./TheTaskCopier.vue_vue_type_script_setup_true_lang-3f0abe00.js";const F={class:"ts-app-drawer is-right is-small is-visible"},M={class:"content"},S={class:"ts-content"},j={class:"ts-header is-large"},q={class:"ts-input is-underlined has-top-spaced"},z=["placeholder"],E={class:"ts-wrap is-end-aligned has-top-spaced-big"},I=p({__name:"TheConfirm",props:{title:{},message:{},accent:{default:"positive"},check:{},confirm:{},cancel:{}},setup(_){const i=h("");return(e,n)=>(c(),d("div",F,[s("div",M,[s("div",S,[s("div",j,l(e.title),1),s("div",{class:g(["ts-text is-secondary has-top-spaced",{"is-negative":e.accent=="negative"}])},l(e.message),3),s("div",q,[b(s("input",{type:"text",placeholder:e.check,"onUpdate:modelValue":n[0]||(n[0]=a=>i.value=a)},null,8,z),[[f,i.value]])]),s("div",E,[s("button",{class:"ts-button is-outlined",onClick:n[1]||(n[1]=(...a)=>e.cancel&&e.cancel(...a))},"Cancel"),s("button",{class:g(["ts-button",{"is-disabled":e.check!==i.value}]),onClick:n[2]||(n[2]=(...a)=>e.confirm&&e.confirm(...a))},"Ok",2)])])])]))}}),L={key:0},O={key:1},U=p({__name:"TheTaskRemover",props:{taskName:{},wrapper:{}},setup(_){const i=_,e=h(""),n=()=>{v.loading=!0,w.emit("remove_task",i.taskName,(a,o,t)=>{a||alert(`${o}: remove task ${i.taskName} failed: ${t}`),e.value="",v.loading=!1})};return(a,o)=>(c(),d(m,null,[a.wrapper=="button"?(c(),d("div",L,[s("button",{class:"ts-button is-outlined has-start-spaced",onClick:o[0]||(o[0]=t=>e.value=a.taskName)},"Remove")])):(c(),d("div",O,[s("a",{class:"ts-text is-link has-cursor-pointer",onClick:o[1]||(o[1]=t=>e.value=a.taskName)},"Remove")])),e.value!==""?(c(),$(I,{key:2,title:"Confirm removal",accent:"negative",message:`You are about to remove task \`${e.value}\``,check:e.value,confirm:()=>n(),cancel:()=>e.value=""},null,8,["message","check","confirm","cancel"])):C("",!0)],64))}}),Y={class:"ts-grid is-relaxed is-3-columns u-top-spaced-large u-bottom-spaced-big"},G={class:"column"},H={class:"ts-box"},J={class:"ts-content"},K={class:"ts-statistic"},P={class:"value"},Q=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-bars-progress-icon"})],-1),W=B('<div class="column"><div class="ts-box"><div class="ts-content"><div class="ts-statistic"><div class="value">0</div></div> complete </div><div class="symbol"><span class="ts-icon is-check-double-icon"></span></div></div></div><div class="column"><div class="ts-box"><div class="ts-content"><div class="ts-statistic"><div class="value">0</div></div> failed </div><div class="symbol"><span class="ts-icon is-circle-exclamation-icon"></span></div></div></div>',2),X={class:"ts-grid is-end-aligned"},Z=s("button",{class:"ts-button"},"Create",-1),ss={class:"ts-box u-top-spaced"},es={class:"ts-table is-celled is-single-line"},ts=s("thead",null,[s("tr",null,[s("th",null,"Name"),s("th",{class:"is-collapsed"},"Algorithm"),s("th",{class:"is-collapsed"},[r("Create At "),s("span",{class:"ts-icon is-sort-down-icon"})])])],-1),as=["data-toggle","onDblclick"],ns=["data-name"],os={class:"is-secondary is-padded is-insetted",colspan:"3"},ls={class:"ts-grid"},is={class:"column"},cs=s("br",null,null,-1),ds=s("br",null,null,-1),rs=s("br",null,null,-1),us={class:"column is-fluid is-end-aligned"},ps=p({__name:"TasksView",setup(_){const i=N(),e=h([]);return y(()=>{e.value=v.tasks,e.value.sort((n,a)=>n.date>a.date?-1:1)}),T(v,n=>{e.value=n.tasks,e.value.sort((a,o)=>a.date>o.date?-1:1)}),(n,a)=>{const o=V("router-link");return c(),d(m,null,[s("div",Y,[s("div",G,[s("div",H,[s("div",J,[s("div",K,[s("div",P,l(e.value.length),1)]),r(" tasks ")]),Q])]),W]),s("div",X,[u(o,{to:{name:"task-create"}},{default:k(()=>[Z]),_:1})]),s("div",ss,[s("table",es,[ts,s("tbody",null,[(c(!0),d(m,null,x(e.value,t=>(c(),d(m,{key:t.name},[s("tr",{class:"has-cursor-pointer","data-toggle":t.name+":has-hidden",onDblclick:ms=>D(i).push({name:"task",params:{name:t.name}})},[s("td",null,l(t.name),1),s("td",null,l(t.args.algorithm),1),s("td",null,l(t.date),1)],40,as),s("tr",{class:"has-hidden","data-name":t.name},[s("td",os,[s("div",ls,[s("div",is,[r(" algorithm: "+l(t.args.algorithm)+" "+l(t.args.algorithm_args),1),cs,r(" learn: "+l(t.args.learn_args),1),ds,r(" helper: "+l(t.args.helper),1),rs]),s("div",us,[u(o,{class:"ts-text is-link",to:{name:"task",params:{name:t.name}}},{default:k(()=>[r("manage")]),_:2},1032,["to"]),u(U,{"task-name":t.name,wrapper:"link"},null,8,["task-name"]),u(R,{taskName:t.name,wrapper:"link"},null,8,["taskName"]),u(A,{"task-name":t.name,wrapper:"link"},null,8,["task-name"])])])])],8,ns)],64))),128))])])])],64)}}});export{ps as default};
