import{d as C,r as p,o as m,c as _,a as s,t as n,n as g,w as y,v as x,u as N,b as V,s as d,e as T,f as j,g as u,h as b,i as k,F as h,j as B,k as L,l as R,m as U,p as f,q as D}from"./index-af3290ef.js";const O={class:"ts-app-drawer is-right is-small is-visible"},S={class:"content"},A={class:"ts-content"},E={class:"ts-header is-large"},F={class:"ts-input is-underlined has-top-spaced"},M=["placeholder"],q={class:"ts-wrap is-end-aligned has-top-spaced-big"},z=C({__name:"TheConfirm",props:{title:{},message:{},accent:{default:"positive"},check:{},confirm:{},cancel:{}},setup($){const v=p("");return(t,a)=>(m(),_("div",O,[s("div",S,[s("div",A,[s("div",E,n(t.title),1),s("div",{class:g(["ts-text is-secondary has-top-spaced",{"is-negative":t.accent=="negative"}])},n(t.message),3),s("div",F,[y(s("input",{type:"text",placeholder:t.check,"onUpdate:modelValue":a[0]||(a[0]=c=>v.value=c)},null,8,M),[[x,v.value]])]),s("div",q,[s("button",{class:"ts-button is-outlined",onClick:a[1]||(a[1]=(...c)=>t.cancel&&t.cancel(...c))},"Cancel"),s("button",{class:g(["ts-button",{"is-disabled":t.check!==v.value}]),onClick:a[2]||(a[2]=(...c)=>t.confirm&&t.confirm(...c))},"Ok",2)])])])]))}}),I={class:"ts-grid is-relaxed is-3-columns u-top-spaced-large u-bottom-spaced-big"},J={class:"column"},Y={class:"ts-box"},G={class:"ts-content"},H={class:"ts-statistic"},K={class:"value"},P=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-bars-progress-icon"})],-1),Q=U('<div class="column"><div class="ts-box"><div class="ts-content"><div class="ts-statistic"><div class="value">0</div></div> complete </div><div class="symbol"><span class="ts-icon is-check-double-icon"></span></div></div></div><div class="column"><div class="ts-box"><div class="ts-content"><div class="ts-statistic"><div class="value">0</div></div> failed </div><div class="symbol"><span class="ts-icon is-circle-exclamation-icon"></span></div></div></div>',2),W={class:"ts-grid is-end-aligned"},X=s("button",{class:"ts-button"},"Create",-1),Z={class:"ts-box u-top-spaced"},ss={class:"ts-table is-celled is-single-line"},es=s("thead",null,[s("tr",null,[s("th",null,"Name"),s("th",{class:"is-collapsed"},"Algorithm"),s("th",{class:"is-collapsed"},[u("Create At "),s("span",{class:"ts-icon is-sort-down-icon"})])])],-1),ts=["data-toggle","onDblclick"],as=["data-name"],os={class:"is-secondary is-padded is-insetted",colspan:"3"},ns={class:"ts-grid"},ls={class:"column"},is=s("br",null,null,-1),cs=s("br",null,null,-1),ds=s("br",null,null,-1),rs={class:"column is-fluid is-end-aligned"},us=["onClick"],vs=["onClick"],_s=C({__name:"TasksView",setup($){const v=N(),t=p([]),a=p(""),c=o=>{d.loading=!0,f.emit("remove_task",o,(l,i,e)=>{l||alert(`${i}: remove task ${o} failed: ${e}`),a.value="",d.loading=!1})},w=o=>{d.loading=!0,f.emit("export_task",o,l=>{d.loading=!1;const i=new Blob([JSON.stringify(l)],{type:"application/json"}),e=window.URL.createObjectURL(i),r=document.createElement("a");r.href=e,r.download=`${o}.json`,r.click(),window.URL.revokeObjectURL(e),d.loading=!1})};return V(()=>{t.value=d.tasks,t.value.sort((o,l)=>o.date>l.date?-1:1)}),T(d,o=>{t.value=o.tasks,t.value.sort((l,i)=>l.date>i.date?-1:1)}),(o,l)=>{const i=j("router-link");return m(),_(h,null,[s("div",I,[s("div",J,[s("div",Y,[s("div",G,[s("div",H,[s("div",K,n(t.value.length),1)]),u(" tasks ")]),P])]),Q]),s("div",W,[b(i,{to:{name:"task-create"}},{default:k(()=>[X]),_:1})]),s("div",Z,[s("table",ss,[es,s("tbody",null,[(m(!0),_(h,null,B(t.value,e=>(m(),_(h,{key:e.name},[s("tr",{class:"has-cursor-pointer","data-toggle":e.name+":has-hidden",onDblclick:r=>D(v).push({name:"task",params:{name:e.name}})},[s("td",null,n(e.name),1),s("td",null,n(e.args.algorithm),1),s("td",null,n(e.date),1)],40,ts),s("tr",{class:"has-hidden","data-name":e.name},[s("td",os,[s("div",ns,[s("div",ls,[u(" algorithm: "+n(e.args.algorithm)+" "+n(e.args.algorithm_args),1),is,u(" learn: "+n(e.args.learn_args),1),cs,u(" helper: "+n(e.args.helper),1),ds]),s("div",rs,[b(i,{class:"ts-text is-link",to:{name:"task",params:{name:e.name}}},{default:k(()=>[u("manage")]),_:2},1032,["to"]),s("a",{class:"ts-text is-link has-cursor-pointer",onClick:r=>a.value=e.name},"remove",8,us),s("a",{class:"ts-text is-link has-cursor-pointer",onClick:r=>w(e.name)},"export",8,vs)])])])],8,as)],64))),128))])])]),a.value!==""?(m(),L(z,{key:0,title:"Confirm removal",accent:"negative",message:`You are about to remove task \`${a.value}\``,check:a.value,confirm:()=>c(a.value),cancel:()=>a.value=""},null,8,["message","check","confirm","cancel"])):R("",!0)],64)}}});export{_s as default};
