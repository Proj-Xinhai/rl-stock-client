import{d as A,o as l,c as n,x as R,u as S,r as v,a as W,y as q,w as F,e as s,f as M,g as D,l as p,z as I,t as y,v as k,A as U,F as f,i as x,s as m,m as z}from"./index-e50f731a.js";const J=A({__name:"TheTaskImporter",props:{parentWrapper:{}},setup(V){const w=V,b=()=>{const i=w.parentWrapper;Object.assign(document.createElement("input"),{type:"file",accept:".json",onchange:g=>{const _=g.target;if(_.files){const h=_.files[0],c=new FileReader;c.readAsText(h),c.onload=()=>{const o=JSON.parse(c.result);i.name.value=o.name,i.algorithm.value=o.algorithm,i.algorithm_args.value=[],i.learn_args.value=[];for(const d in o.algorithm_args)i.algorithm_args.value.push({key:d,value:o.algorithm_args[d]});for(const d in o.learn_args)i.learn_args.value.push({key:d,value:o.learn_args[d]});i.helper.value=o.helper}}}}).click()};return(i,g)=>(l(),n("button",{class:"ts-button is-outlined has-start-spaced",onClick:b},"Import"))}}),G={class:"ts-header is-huge u-bottom-spaced-big"},H={class:"ts-notice is-negative u-bottom-spaced"},K=s("div",{class:"title"},"Error",-1),P={class:"content"},Q={class:"ts-wrap is-vertical"},X={class:"ts-control"},Y=s("div",{class:"label is-start-aligned"},"name",-1),Z={class:"content"},ss={class:"ts-input"},es={class:"ts-control"},ts=s("div",{class:"label is-start-aligned"},"algorithm",-1),os={class:"content"},as={class:"ts-select is-fluid"},ls=["value"],ns=s("option",{selected:"",disabled:"",hidden:""},"Choose algorithm",-1),is={class:"ts-control u-top-spaced-big"},cs=s("div",{class:"label is-start-aligned"},"algorithm_args",-1),ds={class:"content"},rs=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),us=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),_s={class:"column is-5-wide"},vs={class:"ts-input"},ps=["onUpdate:modelValue"],hs={class:"column is-10-wide"},ms={class:"ts-input"},gs=["onUpdate:modelValue"],ys={class:"column is-1-wide"},ks=["onClick"],fs={class:"ts-control u-top-spaced-big u-bottom-spaced-big"},ws=s("div",{class:"label is-start-aligned"},"learn_args",-1),bs={class:"content"},xs=s("div",{class:"column is-5-wide"},[s("span",{class:"ts-text is-secondary"},"key")],-1),Cs=s("div",{class:"column is-10-wide"},[s("span",{class:"ts-text is-secondary"},"value")],-1),Vs={class:"column is-5-wide"},Ts={class:"ts-input"},Us=["onUpdate:modelValue"],As={class:"column is-10-wide"},Es={class:"ts-input"},Os=["onUpdate:modelValue"],$s={class:"column is-1-wide"},js=["onClick"],Bs={class:"ts-control"},Ls=s("div",{class:"label is-start-aligned"},"helper",-1),Ns={class:"content"},Rs={class:"ts-select is-fluid"},Ss=["value"],Ws=s("option",{selected:"",disabled:"",hidden:""},"Choose helper",-1),qs=s("div",{class:"label is-start-aligned"},null,-1),Ms=A({__name:"TaskCreateView",setup(V){const w=R(),b=S(),i=v([]),g=v([]),_=v(""),h=v(""),c=v([]),o=v([]),d=v(""),E={name:_,algorithm:h,algorithm_args:c,learn_args:o,helper:d},C=v(""),T=()=>{i.value=m.algorithms,g.value=m.helpers},O=()=>{c.value.push({key:"",value:""})},$=a=>{c.value.splice(a,1)},j=()=>{o.value.push({key:"",value:""})},B=a=>{o.value.splice(a,1)},L=()=>{m.loading=!0;const a={},t={};c.value.forEach(e=>{a[e.key]=e.value}),o.value.forEach(e=>{t[e.key]=e.value}),z.emit("create_task",{name:_.value,algorithm:h.value,algorithm_args:a,learn_args:t,helper:d.value},(e,r,u)=>{m.loading=!1,e?b.push({name:"tasks"}):C.value=`${r}: ${u}`})},N=()=>{const a=m.tasks.find(t=>t.name==w.query.copy);if(a){_.value=a.name,h.value=a.args.algorithm,c.value=[];for(const[t,e]of Object.entries(a.args.algorithm_args))c.value.push({key:t,value:e});o.value=[];for(const[t,e]of Object.entries(a.args.learn_args))o.value.push({key:t,value:e});d.value=a.args.helper,b.replace({query:{}})}};return W(()=>{T(),w.query.copy&&N(),window.onbeforeunload=()=>"Are you sure you want to leave?"}),q((a,t,e)=>{window.onbeforeunload=null,window.confirm("Are you sure you want to leave?")?e():e(!1)}),F(m,()=>{T()}),(a,t)=>(l(),n(f,null,[s("div",G,[M("Create Task "),D(J,{parentWrapper:E})]),p(s("div",H,[K,s("div",P,y(C.value),1)],512),[[I,C.value!=""]]),s("div",Q,[s("div",X,[Y,s("div",Z,[s("div",ss,[p(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e)},null,512),[[k,_.value]])])])]),s("div",es,[ts,s("div",os,[s("div",as,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e)},[(l(!0),n(f,null,x(i.value,e=>(l(),n("option",{value:e.name,key:e.name},y(e.name)+": "+y(e.description),9,ls))),128)),ns],512),[[U,h.value]])])])]),s("div",is,[cs,s("div",ds,[s("div",{class:"ts-grid is-middle-aligned"},[rs,us,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:O})])]),(l(!0),n(f,null,x(c.value,(e,r)=>(l(),n("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:r},[s("div",_s,[s("div",vs,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.key=u,key:r},null,8,ps)),[[k,e.key]])])]),s("div",hs,[s("div",ms,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.value=u,key:r},null,8,gs)),[[k,e.value]])])]),s("div",ys,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:u=>$(r)},null,8,ks)])]))),128))])]),s("div",fs,[ws,s("div",bs,[s("div",{class:"ts-grid is-middle-aligned"},[xs,Cs,s("div",{class:"column is-1-wide"},[s("span",{class:"ts-icon is-plus-icon has-cursor-pointer",onClick:j})])]),(l(!0),n(f,null,x(o.value,(e,r)=>(l(),n("div",{class:"ts-grid is-middle-aligned u-top-spaced",key:r},[s("div",Vs,[s("div",Ts,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.key=u,key:r},null,8,Us)),[[k,e.key]])])]),s("div",As,[s("div",Es,[p((l(),n("input",{type:"text","onUpdate:modelValue":u=>e.value=u,key:r},null,8,Os)),[[k,e.value]])])]),s("div",$s,[s("span",{class:"ts-icon is-minus-icon has-cursor-pointer",onClick:u=>B(r)},null,8,js)])]))),128))])]),s("div",Bs,[Ls,s("div",Ns,[s("div",Rs,[p(s("select",{class:"ts-text is-secondary","onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},[(l(!0),n(f,null,x(g.value,e=>(l(),n("option",{value:e.name,key:e.name},y(e.name)+": "+y(e.description),9,Ss))),128)),Ws],512),[[U,d.value]])])])]),s("div",{class:"ts-control"},[qs,s("div",{class:"content"},[s("div",{class:"ts-content is-end-aligned"},[s("button",{class:"ts-button",onClick:L},"Create")])])])])],64))}});export{Ms as default};
