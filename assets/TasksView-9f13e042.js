import{d as M,u as U,r,a as V,w as y,b as z,o as d,c as h,e as s,f as C,g as x,n as N,h as D,v as A,F as b,i as B,j as u,t as i,k as E,l as S,m as p,p as F,s as _}from"./index-f718dfe6.js";import{_ as T,a as j,b as P}from"./TheTaskCopier.vue_vue_type_script_setup_true_lang-532066a5.js";const R={class:"ts-wrap is-compact"},q={class:"ts-box u-top-spaced"},G={class:"ts-table is-celled is-single-line"},H={class:"has-cursor-pointer"},I={class:"is-collapsed is-compact"},J=["onClick"],K=["data-toggle","onDblclick"],O={class:"ts-checkbox is-solo"},Q=["id","value"],W={class:"is-collapsed"},X={class:"is-collapsed"},Y=["data-name"],Z={class:"is-secondary is-padded is-insetted",colspan:"4"},ss={class:"ts-grid"},es={class:"column"},ts=s("br",null,null,-1),as=s("br",null,null,-1),ls=s("br",null,null,-1),os={class:"column is-fluid is-end-aligned",style:{"white-space":"initial !important"}},ns=M({__name:"TheTasksList",setup(L){const g=U(),l=r([]),c=r(!1),k=async()=>{l.value.length==n.value.length?l.value=[]:l.value=n.value.map(({name:v})=>v),setTimeout(()=>{c.value=l.value.length>0},0)},n=r([]),t=r("Create At"),a=r(-1),f=(v,o=!1)=>{o&&(t.value!=v?a.value=-1:a.value*=-1,t.value=v),n.value=n.value.slice().sort((m,e)=>m.date>e.date?a.value:-a.value).slice().sort((m,e)=>t.value=="Name"?m.name>e.name?a.value:-a.value:t.value=="Algorithm"?m.args.algorithm>e.args.algorithm?a.value:-a.value:t.value=="Create At"?m.date>e.date?a.value:-a.value:0)},w=()=>{n.value=_.tasks,f(t.value)};return V(()=>{w()}),y(_,()=>{w()}),y(l,()=>{c.value=l.value.length>0}),y(n,()=>{l.value=l.value.filter(v=>n.value.map(({name:o})=>o).includes(v))}),(v,o)=>{const m=z("router-link");return d(),h(b,null,[s("div",R,[c.value?(d(),C(T,{key:0,"task-name":l.value.join(","),wrapper:"button"},null,8,["task-name"])):x("",!0),c.value?(d(),C(j,{key:1,"task-name":l.value.join(","),wrapper:"button"},null,8,["task-name"])):x("",!0),s("button",{class:"ts-button",style:{visibility:"hidden"},onClick:o[0]||(o[0]=e=>console.log("てへぺろ"))})]),s("div",q,[s("table",G,[s("thead",null,[s("tr",H,[s("th",I,[s("label",{class:N(["ts-checkbox is-solo",{"is-indeterminate":l.value.length>0&&l.value.length!==n.value.length}])},[D(s("input",{type:"checkbox",onClick:k,"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e)},null,512),[[A,c.value]])],2)]),(d(),h(b,null,B(["Name","Algorithm","Create At"],e=>s("th",{onClick:$=>f(e,!0)},[u(i(e)+" ",1),t.value==e?(d(),h("span",{key:0,class:N(["ts-icon",{"is-sort-down-icon":a.value==-1,"is-sort-up-icon":a.value==1}])},null,2)):x("",!0)],8,J)),64))])]),s("tbody",null,[(d(!0),h(b,null,B(n.value,e=>(d(),h(b,{key:e.name},[s("tr",{class:"has-cursor-pointer","data-toggle":e.name+":has-hidden",onDblclick:$=>E(g).push({name:"task",params:{name:e.name}})},[s("td",{class:"is-compact",onClick:o[3]||(o[3]=S(()=>{},["stop"])),onDblclick:o[4]||(o[4]=S(()=>{},["stop"]))},[s("label",O,[D(s("input",{type:"checkbox",id:e.name,value:e.name,"onUpdate:modelValue":o[2]||(o[2]=$=>l.value=$)},null,8,Q),[[A,l.value]])])],32),s("td",null,i(e.name),1),s("td",W,i(e.args.algorithm),1),s("td",X,i(e.date),1)],40,K),s("tr",{class:"has-hidden","data-name":e.name},[s("td",Z,[s("div",ss,[s("div",es,[u(" algorithm: "+i(e.args.algorithm)+" "+i(e.args.algorithm_args),1),ts,u(" learn: "+i(e.args.learn_args),1),as,u(" helper: "+i(e.args.helper),1),ls]),s("div",os,[p(m,{class:"ts-text is-link",to:{name:"task",params:{name:e.name}}},{default:F(()=>[u("manage")]),_:2},1032,["to"]),p(T,{"task-name":e.name,wrapper:"link"},null,8,["task-name"]),p(j,{taskName:e.name,wrapper:"link"},null,8,["taskName"]),p(P,{"task-name":e.name,wrapper:"link"},null,8,["task-name"])])])])],8,Y)],64))),128))])])])],64)}}}),is={class:"ts-grid is-relaxed is-3-columns u-top-spaced-large u-bottom-spaced-big"},cs={class:"column"},rs={class:"ts-box"},us={class:"ts-content"},ds={class:"ts-statistic"},_s={class:"value",style:{display:"table-cell"}},vs={class:"ts-text is-secondary is-small"},ms=s("span",{class:"ts-text is-secondary"},"/works",-1),hs=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-bars-progress-icon"})],-1),ps={class:"column"},gs={class:"ts-box"},ks={class:"ts-content"},bs={class:"ts-statistic"},fs={class:"value"},ys=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-gears-icon"})],-1),$s={class:"column"},xs={class:"ts-box"},ws={class:"ts-content"},Cs={class:"ts-statistic"},Ns={class:"value",style:{display:"table-cell"}},Ds={class:"ts-text is-secondary is-negative is-small"},As=s("span",{class:"ts-text is-secondary is-negative"},"/failed",-1),Bs=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-check-double-icon"})],-1),Ss={class:"ts-grid has-full-width is-end-aligned",style:{position:"relative","z-index":"1"}},Ts=s("button",{class:"ts-button"},"Create",-1),Vs=M({__name:"TasksView",setup(L){const g=r(0),l=r(0),c=r(0),k=r(0),n=r(0);return V(()=>{g.value=_.tasks.length,l.value=_.works.length,c.value=_.works.filter(({status:t})=>[0,1].includes(t)).length,k.value=_.works.filter(({status:t})=>t==2).length,n.value=_.works.filter(({status:t})=>t==-1).length}),y(_,t=>{g.value=t.tasks.length,l.value=t.works.length,c.value=t.works.filter(({status:a})=>[0,1].includes(a)).length,k.value=t.works.filter(({status:a})=>a==2).length,n.value=t.works.filter(({status:a})=>a==-1).length}),(t,a)=>{const f=z("router-link");return d(),h(b,null,[s("div",is,[s("div",cs,[s("div",rs,[s("div",us,[s("div",ds,[s("div",_s,[u(i(g.value)+" ",1),s("span",vs,"/"+i(l.value),1)])]),u(" tasks "),ms]),hs])]),s("div",ps,[s("div",gs,[s("div",ks,[s("div",bs,[s("div",fs,i(c.value),1)]),u(" works in progress ")]),ys])]),s("div",$s,[s("div",xs,[s("div",ws,[s("div",Cs,[s("div",Ns,[u(i(k.value)+" ",1),s("span",Ds,"/"+i(n.value),1)])]),u(" complete "),As]),Bs])])]),s("div",Ss,[p(f,{to:{name:"task-create"},style:{position:"absolute"}},{default:F(()=>[Ts]),_:1})]),p(ns)],64)}}});export{Vs as default};
