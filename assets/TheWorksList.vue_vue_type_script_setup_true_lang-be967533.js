import{d as w,u as F,r as u,a as L,w as S,o as c,c as v,b as e,n as h,f as k,g as E,v as V,F as g,h as $,s as b,i as U,t as p,j,k as z}from"./index-7143f558.js";const R={class:"ts-wrap is-compact is-middle-aligned"},W={class:"ts-box u-top-spaced"},q={class:"ts-table is-celled is-single-line"},G={class:"is-collapsed is-compact"},H=["onClick"],I=["onClick"],J={class:"ts-checkbox is-solo"},K=["id","value"],O={class:"is-center-aligned is-collapsed"},P={class:"is-center-aligned is-collapsed"},Q={key:0,class:"ts-modal is-big is-visible"},X={class:"content"},Y={class:"ts-content"},Z={class:"ts-grid is-middle-aligned"},ee=e("div",{class:"column is-fluid"},[e("div",{class:"ts-header"},"Ev")],-1),se={class:"column"},te=e("div",{class:"ts-divider"},null,-1),le=e("div",{class:"ts-content"},[e("table",{class:"ts-table is-single-line"},[e("thead",null,[e("tr",null,[e("th",null,"id"),e("th",null,"a"),e("th",null,"b")])]),e("tbody",null,[e("tr",null,[e("td",null,"a"),e("td",null,"a"),e("td",null,"a")])])])],-1),ne=w({__name:"TheWorksList",props:{task:{}},setup(A){const C=A,B=F(),D=u([]),n=u([]),d=u("Create At"),l=u(-1),a=u([]),r=u(!1),_=u(!1),m=u([]),f=u(!1),M=()=>{f.value=!0,m.value=[],a.value.forEach(o=>{const t=n.value.find(({id:s})=>s==o);t.evaluation.length==0&&(f.value=!1),m.value.push(t.evaluation),console.log(m.value)})},N=async()=>{a.value.length==n.value.length?a.value=[]:a.value=n.value.map(({id:o})=>o),setTimeout(()=>{r.value=a.value.length>0},0)},T={0:"pending",1:"running",2:"complete","-1":"failed"},y=(o,t=!1)=>{t&&(d.value!=o?l.value=-1:l.value*=-1,d.value=o),n.value=n.value.slice().sort((s,i)=>s.date>i.date?l.value:-l.value).slice().sort((s,i)=>d.value=="id"?s.id>i.id?l.value:-l.value:d.value=="task_name"?s.task_name>i.task_name?l.value:-l.value:d.value=="Status"?s.status>i.status?l.value:-l.value:d.value=="Create At"?s.date>i.date?l.value:-l.value:0)},x=()=>{D.value=b.tasks,n.value=b.works,C.task!=null&&(n.value=n.value.filter(({task_name:o})=>o==C.task)),y(d.value)};return L(()=>{x()}),S(b,()=>{x()}),S(a,()=>{r.value=a.value.length>0,M()}),(o,t)=>(c(),v(g,null,[e("div",R,[r.value?(c(),v("button",{key:0,class:h(["ts-button is-outlined",{"is-disabled":!f.value}]),onClick:t[0]||(t[0]=s=>_.value=!0)},"Evaluations",2)):k("",!0),e("button",{class:"ts-button",style:{visibility:"hidden"},onClick:t[1]||(t[1]=s=>console.log("てへぺろ"))})]),e("div",W,[e("table",q,[e("thead",null,[e("tr",null,[e("th",G,[e("label",{class:h(["ts-checkbox is-solo",{"is-indeterminate":a.value.length>0&&a.value.length!==n.value.length}])},[E(e("input",{type:"checkbox",onClick:N,"onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s)},null,512),[[V,r.value]])],2)]),(c(),v(g,null,$(["id","task_name","Status","Create At"],s=>e("th",{onClick:i=>y(s,!0)},[U(p(s)+" ",1),d.value==s?(c(),v("span",{key:0,class:h(["ts-icon",{"is-sort-down-icon":l.value==-1,"is-sort-up-icon":l.value==1}])},null,2)):k("",!0)],8,H)),64))])]),e("tbody",null,[(c(!0),v(g,null,$(n.value,s=>(c(),v("tr",{key:s.id,class:"has-cursor-pointer",onClick:i=>j(B).push({name:"work",params:{id:s.id}})},[e("td",{class:"is-compact",onClick:t[4]||(t[4]=z(()=>{},["stop"]))},[e("label",J,[E(e("input",{type:"checkbox",id:s.id,value:s.id,"onUpdate:modelValue":t[3]||(t[3]=i=>a.value=i)},null,8,K),[[V,a.value]])])]),e("td",O,p(s.id),1),e("td",null,p(s.task_name),1),e("td",{class:h(["is-center-aligned is-collapsed",{"is-indicated":s.status!==0,"is-positive":s.status==2,"is-negative":s.status==-1}])},p(T[s.status]),3),e("td",P,p(s.date),1)],8,I))),128))])])]),_.value?(c(),v("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[ee,e("div",se,[e("button",{class:"ts-close",onClick:t[5]||(t[5]=s=>_.value=!1)})])])]),te,le])])):k("",!0)],64))}});export{ne as _};
