import{d as M,u as N,r as c,a as T,w as g,o as d,c as r,b as s,n as m,g as C,v as x,F as b,h as y,s as h,i as F,t as v,f as L,j as U,k as $}from"./index-420f131f.js";const j={class:"ts-box u-top-spaced"},z={class:"ts-table is-celled is-single-line"},E={class:"is-collapsed is-compact"},R=["onClick"],W=["onClick"],q={class:"ts-checkbox is-solo"},G=["id","value"],H={class:"is-center-aligned is-collapsed"},I={class:"is-center-aligned is-collapsed"},K=M({__name:"TheWorksList",props:{task:{}},setup(S){const _=S,V=N(),B=c([]),n=c([]),i=c("Create At"),t=c(-1),a=c([]),p=c(!1),A=async()=>{a.value.length==n.value.length?a.value=[]:a.value=n.value.map(({id:u})=>u),setTimeout(()=>{p.value=a.value.length>0},0)},D={0:"pending",1:"running",2:"complete","-1":"failed"},k=(u,o=!1)=>{o&&(i.value!=u?t.value=-1:t.value*=-1,i.value=u),n.value=n.value.slice().sort((e,l)=>e.date>l.date?t.value:-t.value).slice().sort((e,l)=>i.value=="id"?e.id>l.id?t.value:-t.value:i.value=="task_name"?e.task_name>l.task_name?t.value:-t.value:i.value=="Status"?e.status>l.status?t.value:-t.value:i.value=="Create At"?e.date>l.date?t.value:-t.value:0)},f=()=>{B.value=h.tasks,n.value=h.works,_.task!=null&&(n.value=n.value.filter(({task_name:u})=>u==_.task)),k(i.value)};return T(()=>{f()}),g(h,()=>{f()}),g(a,()=>{p.value=a.value.length>0}),(u,o)=>(d(),r("div",j,[s("table",z,[s("thead",null,[s("tr",null,[s("th",E,[s("label",{class:m(["ts-checkbox is-solo",{"is-indeterminate":a.value.length>0&&a.value.length!==n.value.length}])},[C(s("input",{type:"checkbox",onClick:A,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e)},null,512),[[x,p.value]])],2)]),(d(),r(b,null,y(["id","task_name","Status","Create At"],e=>s("th",{onClick:l=>k(e,!0)},[F(v(e)+" ",1),i.value==e?(d(),r("span",{key:0,class:m(["ts-icon",{"is-sort-down-icon":t.value==-1,"is-sort-up-icon":t.value==1}])},null,2)):L("",!0)],8,R)),64))])]),s("tbody",null,[(d(!0),r(b,null,y(n.value,e=>(d(),r("tr",{key:e.id,class:"has-cursor-pointer",onClick:l=>U(V).push({name:"work",params:{id:e.id}})},[s("td",{class:"is-compact",onClick:o[2]||(o[2]=$(()=>{},["stop"]))},[s("label",q,[C(s("input",{type:"checkbox",id:e.id,value:e.id,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value=l)},null,8,G),[[x,a.value]])])]),s("td",H,v(e.id),1),s("td",null,v(e.task_name),1),s("td",{class:m(["is-center-aligned is-collapsed",{"is-indicated":e.status!==0,"is-positive":e.status==2,"is-negative":e.status==-1}])},v(D[e.status]),3),s("td",I,v(e.date),1)],8,W))),128))])])]))}});export{K as _};
