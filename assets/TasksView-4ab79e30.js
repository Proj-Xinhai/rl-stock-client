import{d as M,u as z,r,a as V,w,b as F,o as d,c as h,e as s,f as C,g as $,n as N,h as D,v as A,F as b,i as B,j as u,t as o,k as E,l as S,m,p as L,s as _}from"./index-abfb0180.js";import{_ as T,a as j,b as P}from"./TheTaskCopier.vue_vue_type_script_setup_true_lang-788cebd2.js";const R={class:"ts-wrap is-compact"},q={class:"ts-box u-top-spaced"},G={class:"ts-table is-celled is-single-line"},H={class:"has-cursor-pointer"},I={class:"is-collapsed is-compact"},J=["onClick"],K=["data-toggle","onDblclick"],O={class:"ts-checkbox is-solo"},Q=["id","value"],W={class:"is-collapsed"},X={class:"is-collapsed"},Y=["data-name"],Z={class:"is-secondary is-padded is-insetted",colspan:"4"},ss={class:"ts-grid"},es={class:"column"},ts=s("br",null,null,-1),as=s("br",null,null,-1),ls=s("br",null,null,-1),os={class:"column is-fluid is-end-aligned",style:{"white-space":"initial !important"}},ns=M({__name:"TheTasksList",setup(U){const p=z(),l=r([]),c=r(!1),g=async()=>{l.value.length==i.value.length?l.value=[]:l.value=i.value.map(({name:k})=>k),setTimeout(()=>{c.value=l.value.length>0},0)},i=r([]),t=r("Create At"),a=r(-1),f=(k,n=!1)=>{n&&(t.value!=k?a.value=-1:a.value*=-1,t.value=k),i.value=i.value.slice().sort((v,e)=>v.date>e.date?a.value:-a.value).slice().sort((v,e)=>t.value=="Name"?v.name>e.name?a.value:-a.value:t.value=="Algorithm"?v.args.algorithm>e.args.algorithm?a.value:-a.value:t.value=="Create At"?v.date>e.date?a.value:-a.value:0)},x=()=>{i.value=_.tasks,f(t.value)};return V(()=>{x()}),w(_,()=>{x()}),w(l,()=>{c.value=l.value.length>0}),(k,n)=>{const v=F("router-link");return d(),h(b,null,[s("div",R,[c.value?(d(),C(T,{key:0,"task-name":l.value.join(","),wrapper:"button"},null,8,["task-name"])):$("",!0),c.value?(d(),C(j,{key:1,"task-name":l.value.join(","),wrapper:"button"},null,8,["task-name"])):$("",!0),s("button",{class:"ts-button",style:{visibility:"hidden"},onClick:n[0]||(n[0]=e=>console.log("てへぺろ"))})]),s("div",q,[s("table",G,[s("thead",null,[s("tr",H,[s("th",I,[s("label",{class:N(["ts-checkbox is-solo",{"is-indeterminate":l.value.length>0&&l.value.length!==i.value.length}])},[D(s("input",{type:"checkbox",onClick:g,"onUpdate:modelValue":n[1]||(n[1]=e=>c.value=e)},null,512),[[A,c.value]])],2)]),(d(),h(b,null,B(["Name","Algorithm","Create At"],e=>s("th",{onClick:y=>f(e,!0)},[u(o(e)+" ",1),t.value==e?(d(),h("span",{key:0,class:N(["ts-icon",{"is-sort-down-icon":a.value==-1,"is-sort-up-icon":a.value==1}])},null,2)):$("",!0)],8,J)),64))])]),s("tbody",null,[(d(!0),h(b,null,B(i.value,e=>(d(),h(b,{key:e.name},[s("tr",{class:"has-cursor-pointer","data-toggle":e.name+":has-hidden",onDblclick:y=>E(p).push({name:"task",params:{name:e.name}})},[s("td",{class:"is-compact",onClick:n[3]||(n[3]=S(()=>{},["stop"])),onDblclick:n[4]||(n[4]=S(()=>{},["stop"]))},[s("label",O,[D(s("input",{type:"checkbox",id:e.name,value:e.name,"onUpdate:modelValue":n[2]||(n[2]=y=>l.value=y)},null,8,Q),[[A,l.value]])])],32),s("td",null,o(e.name),1),s("td",W,o(e.args.algorithm),1),s("td",X,o(e.date),1)],40,K),s("tr",{class:"has-hidden","data-name":e.name},[s("td",Z,[s("div",ss,[s("div",es,[u(" algorithm: "+o(e.args.algorithm)+" "+o(e.args.algorithm_args),1),ts,u(" learn: "+o(e.args.learn_args),1),as,u(" helper: "+o(e.args.helper),1),ls]),s("div",os,[m(v,{class:"ts-text is-link",to:{name:"task",params:{name:e.name}}},{default:L(()=>[u("manage")]),_:2},1032,["to"]),m(T,{"task-name":e.name,wrapper:"link"},null,8,["task-name"]),m(j,{taskName:e.name,wrapper:"link"},null,8,["taskName"]),m(P,{"task-name":e.name,wrapper:"link"},null,8,["task-name"])])])])],8,Y)],64))),128))])])])],64)}}}),is={class:"ts-grid is-relaxed is-3-columns u-top-spaced-large u-bottom-spaced-big"},cs={class:"column"},rs={class:"ts-box"},us={class:"ts-content"},ds={class:"ts-statistic"},_s={class:"value",style:{display:"table-cell"}},vs={class:"ts-text is-secondary is-small"},hs=s("span",{class:"ts-text is-secondary"},"/works",-1),ms=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-bars-progress-icon"})],-1),ps={class:"column"},gs={class:"ts-box"},ks={class:"ts-content"},bs={class:"ts-statistic"},fs={class:"value"},ys=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-gears-icon"})],-1),$s={class:"column"},ws={class:"ts-box"},xs={class:"ts-content"},Cs={class:"ts-statistic"},Ns={class:"value",style:{display:"table-cell"}},Ds={class:"ts-text is-secondary is-negative is-small"},As=s("span",{class:"ts-text is-secondary is-negative"},"/failed",-1),Bs=s("div",{class:"symbol"},[s("span",{class:"ts-icon is-check-double-icon"})],-1),Ss={class:"ts-grid has-full-width is-end-aligned",style:{position:"relative"}},Ts=s("button",{class:"ts-button"},"Create",-1),Vs=M({__name:"TasksView",setup(U){const p=r(0),l=r(0),c=r(0),g=r(0),i=r(0);return V(()=>{p.value=_.tasks.length,l.value=_.works.length,c.value=_.works.filter(({status:t})=>[0,1].includes(t)).length,g.value=_.works.filter(({status:t})=>t==2).length,i.value=_.works.filter(({status:t})=>t==-1).length}),w(_,t=>{p.value=t.tasks.length,l.value=t.works.length,c.value=t.works.filter(({status:a})=>[0,1].includes(a)).length,g.value=t.works.filter(({status:a})=>a==2).length,i.value=t.works.filter(({status:a})=>a==-1).length}),(t,a)=>{const f=F("router-link");return d(),h(b,null,[s("div",is,[s("div",cs,[s("div",rs,[s("div",us,[s("div",ds,[s("div",_s,[u(o(p.value)+" ",1),s("span",vs,"/"+o(l.value),1)])]),u(" tasks "),hs]),ms])]),s("div",ps,[s("div",gs,[s("div",ks,[s("div",bs,[s("div",fs,o(c.value),1)]),u(" works in progress ")]),ys])]),s("div",$s,[s("div",ws,[s("div",xs,[s("div",Cs,[s("div",Ns,[u(o(g.value)+" ",1),s("span",Ds,"/"+o(i.value),1)])]),u(" complete "),As]),Bs])])]),s("div",Ss,[m(f,{to:{name:"task-create"},style:{position:"absolute"}},{default:L(()=>[Ts]),_:1})]),m(ns)],64)}}});export{Vs as default};
